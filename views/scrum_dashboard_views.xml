<!-- file: project_scrum/views/scrum_dashboard_views.xml -->
<odoo>
    <record id="view_scrum_dashboard" model="ir.ui.view">
        <field name="name">scrum.dashboard</field>
        <field name="model">scrum.sprint</field>
        <field name="arch" type="xml">
            <dashboard>
                <group>
                    <!-- Velocity per Sprint: usiamo il campo calcolato su scrum.sprint -->
                    <widget name="graph"
                            type="bar"
                            title="Velocity Sprint"
                            model="scrum.sprint"
                            measure="velocity"
                            group_by="name"/>
                </group>
                <group>
                    <!-- Burndown Chart: raggruppa le linee di burndown per data -->
                    <widget name="graph"
                            type="line"
                            title="Burndown Sprint"
                            model="scrum.burndown.line"
                            domain="[('sprint_id','=', active_id)]"
                            measure="remaining_points"
                            group_by="date"/>
                </group>
                <group>
                    <!-- Pie chart delle User Story per stato -->
                    <widget name="graph"
                            type="pie"
                            title="Stato User Stories"
                            model="scrum.user.story"
                            domain="[('sprint_id','=', active_id)]"
                            measure="__count__"
                            group_by="state"/>
                </group>
            </dashboard>
        </field>
    </record>
</odoo>
